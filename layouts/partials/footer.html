		{{ partial "backToTop.html" . }}

		{{ partialCached "newsletter.html" . }}
	</div><!-- .content-container -->
	<div class="site-footer-container">
		<footer class="site-footer">
			{{ with $.Site.Params.tagline }}
			<div class="site-tagline">{{ . }}</div>
			{{ end }}

			{{ with $.Site.Params.email }}
			<div class="site-footer__contact">
				<a href="mailto:{{ . }}" target="_blank">
					{{ i18n "contact" }}: {{ . }}
				</a>
			</div>

			{{ end }}

			{{ if ne .Kind "404" }}
				{{ with .Site.Menus.main }}
					<nav class="footer-menu">
						<ul>
							{{ partial "menu.html" . }}
						</ul>
					</nav>
				{{ end }}
			{{ end }}

			{{ if or $.Site.Data.sponsors (or $.Site.Data.developers $.Site.Data.responsibles) }}
				<div role="contentinfo">
					<div class="responsibles-and-sponsors-wrapper">
						{{ partialCached "responsibles.html" . }}

						{{ partialCached "sponsors.html" . }}
					</div>

					{{ partialCached "developers.html" . }}

				</div>
			{{ end }}
		</footer>
	</div>
	{{ partialCached "browserUpdate.html" . }}
</div><!-- .main-container -->

{{ with $.Scratch.Get "scriptsFooter" }}
	{{ . | safeHTML }}
{{ end }}

<script>
	var target = document.querySelector('.wave-ornament');

	function updateBgPosition() {
		var scrollHeight = document.body.scrollTop;

		var newPosition = 'left ' + scrollHeight + 'px bottom 1px,'
			+'left ' + scrollHeight + 'px bottom,'
			+'left '+ scrollHeight + 'px bottom 2px';
		target.style.backgroundPosition = newPosition;
	}

	if (target) {
		target.style.transitionProperty = 'background-position';

		window.addEventListener('load', updateBgPosition);
		window.document.body.addEventListener('scroll', updateBgPosition);
	}
</script>

<script>
	var delayedEls = document.querySelectorAll('[class*="delayed-entrance"]');

	function checkVisible(elm, threshold, mode) {
		threshold = threshold || 0;
		mode = mode || 'visible';

		var rect = elm.getBoundingClientRect();
		var viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);
		var above = rect.bottom - threshold < 0;
		var below = rect.top - viewHeight + threshold >= 0;

		return mode === 'above' ? above : (mode === 'below' ? below : !above && !below);
	}

	function throttle(fn, wait) {
		var time = Date.now();
		return function() {
			if ((time + wait - Date.now()) < 0) {
				fn();
				time = Date.now();
			}
		}
	}

	function removeClass() {
		for (let index = 0; index < delayedEls.length; index++) {
			const element = delayedEls[index];

			if (checkVisible(element, 150)) {
				element.className = element.className.replace('delayed-entrance__bottom', '');
			}
		}
	}

	if (delayedEls.length){
		window.addEventListener('load', removeClass);
		window.document.body.addEventListener('scroll', throttle(removeClass, 300));
		window.document.addEventListener('scroll', throttle(removeClass, 300));
	}
</script>

<script>
var fragmentLinks = document.querySelectorAll('a[href^="#"]');

function isTallerThanView(el) {
	var elemHeight = el.clientHeight;

	return (elemHeight > window.innerHeight);
}

function isScrolledIntoView(el) {
	var rect = el.getBoundingClientRect();
	var elemTop = rect.top;
	var elemBottom = rect.bottom;

	return (elemTop>= 0)
		&& (elemBottom <= window.innerHeight);
}

function scrollTo(e) {
	var targetQuery = e.currentTarget.getAttribute('href');
	var targetEl = document.querySelector(targetQuery);

	e.preventDefault();

	if (!isScrolledIntoView(targetEl)) {
		var blockPosition = isTallerThanView(targetEl)
			? 'start'
			: 'center';

		targetEl.scrollIntoView({ block: blockPosition, behavior: 'smooth' });
	}

	window.history.pushState(null, null, targetQuery);

	targetEl.focus({preventScroll: true});
}

for (let i = 0; i < fragmentLinks.length; i++) {
	var element = fragmentLinks[i];
	element.addEventListener('click', scrollTo);
}
</script>

</body>
</html>
