{{ $.Scratch.Add "scriptsHeader" `
<link rel="preload" href="https://vuejs.org/js/vue.js" as="script" crossorigin="anonymous">
<link rel="preload" href="/assets/scripts/index.js" as="script">
` }}{{ $.Scratch.Add "rootClass" "results-page" }}{{ partial "header.html" . }}

<article role="main" id="conteudo">
	<h1>{{ .Title }}</h1>

	{{ with .Content }}
		{{ . }}
	{{ end }}

	<div id="results__list" hidden>
		<form method="get" name="analisys_form" class="analisys-form--rebuild">
			<fieldset>
				<p>{{ i18n "returnedResults" "<output>{{ profileList.length }}</output>" | safeHTML }}</p>

				<input type="hidden" name="profile" :value="query.profile">

				<button name="search_for" value="followers" type="submit">{{ i18n "toCatchFollowers" }}</button>
				<button name="search_for" value="friends" type="submit">{{ i18n "toCatchFriends" }}</button>
			</fieldset>
		</form>

		<section class="results__list">
			<profile v-for="profileItem in profileList" v-bind:user="profileItem" v-bind:key="profileItem.username"></profile>
		</section>

		<footer class="results__footer">
			<p>
				<a :href="profilesMeta.downloadResults.value" id="results__export" download>
					{{ i18n "toExportData" }}
				</a>
			</p>

			<p class="results__progress" id="results__progress">
				{{ i18n "analysisProgress" "<strong>{{ profilesMeta.current }} / {{ profilesMeta.total }}</strong>" | safeHTML }}
			</p>
			<button type="button">{{ i18n "toStop" }}</button>
		</footer>
	</div>

</article>

<script type="text/x-template" id="profile">
	{{ partial "profile.html" . }}
</script>

{{ if eq (getenv "NODE_ENV") "development" }}
{{ $.Scratch.Add "scriptsFooter" `
<script src="https://vuejs.org/js/vue.js"></script>
` }}
{{ else }}
{{ $.Scratch.Add "scriptsFooter" `
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>
` }}
{{ end }}

{{ $.Scratch.Add "scriptsFooter" `
<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.5"></script>
<script src="/assets/scripts/index.js"></script>
` }}
{{ partial "footer.html" . }}
